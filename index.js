(()=>{"use strict";(()=>{var e={capsLock:!1,lang:"en"},t=new Set,a=["`","1","2","3","4","5","6","7","8","9","0","-","=","Backspace","Tab","q","w","e","r","t","y","u","i","o","p","[","]","\\","Caps","a","s","d","f","g","h","j","k","l",";","'","Enter","Shift","z","x","c","v","b","n","m",",",".","?","Shift","▲","Ctrl","Alt","space","Alt","Ctr","◄","▼","►"],n=["ё","1","2","3","4","5","6","7","8","9","0","-","=","Backspace","Tab","й","ц","у","к","е","н","г","ш","щ","з","х","ъ","\\","Caps","ф","ы","в","а","п","р","о","л","д","ж","э","Enter","Shift","я","ч","с","м","и","т","ь","б","ю",".","Shift","▲","Ctrl","Alt","space","Alt","Ctr","◄","▼","►"];function o(t){var a=document.querySelector(".keyboard__keys");a.innerHTML="";var n=document.createDocumentFragment(),o=["Backquote","Digit1","Digit2","Digit3","Digit4","Digit5","Digit6","Digit7","Digit8","Digit9","Digit0","Minus","Equal","Backspace","Tab","KeyQ","KeyW","KeyE","KeyR","KeyT","KeyY","KeyU","KeyI","KeyO","KeyP","BracketLeft","BracketRight","Backslash","CapsLock","KeyA","KeyS","KeyD","KeyF","KeyG","KeyH","KeyJ","KeyK","KeyL","Semicolon","Quote","Enter","ShiftLeft","KeyZ","KeyX","KeyC","KeyV","KeyB","KeyN","KeyM","Comma","Period","Slash","ShiftRight","ArrowUp","ControlLeft","AltLeft","Space","AltRight","ControlRight","ArrowLeft","ArrowDown","ArrowRight"];t.forEach((function(t,a){var r=document.createElement("button");r.dataset.id=o[a];var c=-1!==["Backspace","Backslash","Enter","ArrowUp"].indexOf(o[a]);switch(r.setAttribute("type","button"),r.classList.add("keyboard__key"),t){case"Backspace":case"Enter":case"Shift":r.classList.add("keyboard__key--big"),r.innerText=t;break;case"Caps":r.classList.add("keyboard__key--big"),r.classList.add("keyboard__key--activebutonn"),r.innerText=t,e.capsLock&&r.classList.add("keyboard__key--active");break;case"space":r.classList.add("keyboard__key--space");break;case"Shift":case"Alt":case"Сtrl":r.innerText=t;break;default:e.capsLock?r.innerText=t.toUpperCase():r.innerText=t}n.appendChild(r),c&&n.append(document.createElement("br"))})),a.append(n)}function r(){for(var t=["~","!","@","#","$","%","^","&","*","(",")","_","+"],a=["Ё","!",'"',"№",";","%",":","?","*","(",")","_","+"],n=document.querySelectorAll(".keyboard__key"),o=0;o<13;o++)"en"==e.lang&&(n[o].textContent=t[o]),"ru"==e.lang&&(n[o].textContent=a[o]);for(var r=13;r<n.length;r++){if("en"==e.lang)switch(r){case 25:n[r].textContent="{";break;case 26:n[r].textContent="}";break;case 27:n[r].textContent="|";break;case 38:n[r].textContent=":";break;case 39:n[r].textContent='"';break;case 49:n[r].textContent="<";break;case 50:n[r].textContent=">";break;case 51:n[r].textContent="?";break;default:1===n[r].innerText.length&&(e.capsLock?n[r].textContent=n[r].textContent.toLowerCase():n[r].textContent=n[r].textContent.toUpperCase())}if("ru"==e.lang)switch(r){case 27:n[r].textContent="/";break;case 51:n[r].textContent=",";break;default:1===n[r].innerText.length&&(e.capsLock?n[r].textContent=n[r].textContent.toLowerCase():n[r].textContent=n[r].textContent.toUpperCase())}}}!function(){var e=document.createElement("header");e.classList.add("header");var t=document.createElement("h1"),a=document.body,n=document.createElement("div");n.classList.add("wraper"),a.append(n),n.append(e),t.innerText="Виртуальная клавиатура",e.append(t);var o=document.createElement("main");n.append(o);var r=document.createElement("p");r.classList.add("text"),r.innerText="Клавиатура создана в операционной системе Windows. Для переключения языка используйте комбинацию: левыe ctrl + shift",o.append(r);var c=document.createElement("textarea");c.classList.add("textarea"),o.append(c);var s=document.createElement("div");s.classList.add("keyboard"),o.append(s);var d=document.createElement("div");d.classList.add("keyboard__keys"),s.append(d)}();var c=document.querySelector(".textarea"),s=document.querySelector(".keyboard__keys");function d(){"en"==e.lang?o(a):"ru"==e.lang&&o(n)}window.addEventListener("DOMContentLoaded",o(a)),document.querySelectorAll(".keyboard__key"),s.addEventListener("mousedown",(function(c){var s=document.querySelector(".textarea"),d=c.target;if(t.add(d.dataset.id),0!=d.textContent.length)if(1!=d.textContent.length)if("Enter"!=d.textContent)if("Tab"!=d.textContent)if("Backspace"!=d.textContent)if("Caps"!=d.textContent)t.has("ControlLeft")&&t.has("ShiftLeft")?"en"===e.lang?(e.lang="ru",o(n)):(e.lang="en",o(a)):(t.has("ShiftRight")||t.has("ShiftLeft"))&&r();else{var i=document.querySelectorAll(".keyboard__key");e.capsLock=!e.capsLock,d.classList.toggle("keyboard__key--active");for(var l=0;l<i.length;l++)1===i[l].innerText.length&&(e.capsLock?i[l].textContent=i[l].textContent.toUpperCase():i[l].textContent=i[l].textContent.toLowerCase())}else s.value=s.value.slice(0,s.value.length-1);else s.value+="  ";else s.value+="\n";else s.value+=d.textContent;else s.value+=" "})),s.addEventListener("mouseup",(function(e){var a=e.target;t.delete(a.dataset.id),"ShiftRight"!=a.dataset.id&&"ShiftLeft"!=a.dataset.id||d()})),document.addEventListener("keydown",(function(s){document.querySelector("[data-id=".concat(s.code,"]")).classList.add("keyboard__key--dark"),t.add(s.code),t.has("ControlLeft")&&t.has("ShiftLeft")?"en"===e.lang?(e.lang="ru",o(n)):(e.lang="en",o(a)):"ShiftRight"==s.code||"ShiftLeft"==s.code?r():function(t){var a=document.querySelector("[data-id=".concat(t.code,"]"));switch(t.code){case"CapsLock":t.preventDefault(),e.capsLock=!e.capsLock,a.classList.toggle("keyboard__key--active");for(var n=document.querySelectorAll(".keyboard__key"),o=0;o<n.length;o++)1===n[o].innerText.length&&(e.capsLock?n[o].textContent=n[o].textContent.toUpperCase():n[o].textContent=n[o].textContent.toLowerCase());break;case"Tab":t.preventDefault(),c.value+=" ";break;case"ShiftLeft":case"ShiftRight":case"ControlLeft":case"AltLeft":case"AltRight":case"ControlRight":t.preventDefault();break;case"ArrowUp":case"ArrowLeft":case"ArrowDown":case"ArrowRight":case"Enter":case"Space":case"Backspace":break;default:t.preventDefault(),c.value+=a.textContent}}(s)})),document.addEventListener("keyup",(function(e){document.querySelector("[data-id=".concat(e.code,"]")).classList.remove("keyboard__key--dark"),t.delete(e.code),"ShiftRight"!=e.code&&"ShiftLeft"!=e.code||d()})),window.addEventListener("beforeunload",(function(){localStorage.setItem("lang",e.lang)})),window.addEventListener("load",(function(){localStorage.getItem("lang")&&(e.lang=localStorage.getItem("lang"),"en"==e.lang?o(a):"ru"==e.lang&&o(n))}))})()})();